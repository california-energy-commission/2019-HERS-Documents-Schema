<!DOCTYPE html>
<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ruby Critic - Home</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- StyleSheets -->
    <link href="../assets/stylesheets/bootstrap.min.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <link href="../assets/stylesheets/font-awesome.min.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <link href="../assets/stylesheets/prettify.custom_theme.css" media="screen, projection, print" rel="stylesheet" type="text/css">
    <link href="../assets/stylesheets/application.css" media="screen, projection, print" rel="stylesheet" type="text/css">
  </head>

  <body>
    <header class="navbar navbar-default navbar-fixed-top">
      <a href="#menu-toggle" class="btn btn-default hidden-lg visible-sm-* hidden-md visible-xs-* pull-left" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a>
      <a href="../overview.html"><img src="../assets/images/logo.png" title="Ruby Critic Logo" width="55"><span class="logo">RUBYCRITIC</span></a>
      
    </header>
    <div id="wrapper">
      <!-- Sidebar -->
      <aside id="sidebar-wrapper">
        <ul class="sidebar-nav">
          <li class="sidebar-item">
            <a href="../overview.html" class="project-nav-item overview-nav"><i class="fa fa-dashboard"></i>Overview</a>
          </li>
          <li class="sidebar-item">
            <a href="../code_index.html" class="project-nav-item code-index-nav"><i class="fa fa-code"></i>Code</a>
          </li>
          <li class="sidebar-item">
            <a href="../smells_index.html" class="project-nav-item smells-index-nav"><i class="fa fa-warning"></i>Smells</a>
          </li>
        </ul>
      </aside>
      <!-- /#sidebar-wrapper -->
      <div id="page-content-wrapper">
        <div class="container-fluid">
          <div class="row">
  <!--Page Title -->
  <div class="Page_Title">
    <div class="file-time">
      <span class="committed-at">
        
          Updated <time class='js-timeago' datetime='2019-01-26 17:37:52 +1000'>2019-01-26 17:37:52 +1000</time>
        
      </span>
    </div>
    <div>
      <h3><small>tools /</small> built_in_datatypes.rb</h3>
    </div>
  </div>
  <!--End Page Title -->
  <div class="Content_Wrapper">
    <!-- code detail -->
    <div class="code-top-detail clearfix row">
      <div class="col-md-8">
        <div class="row">
          <div class="col-md-1">
            <div class="rating d big">
              D
            </div>
          </div>
          <div class="code-statistics col-md-11">
            <div class="col-md-3">
              <div><span class="metric">66</span><small> lines of codes</small></div>
              <div><span class="metric">1</span><small> methods</small></div>
            </div>
            <div class="col-md-3">
              <div><span class="metric">1.1</span><small> complexity/method</small></div>
              <div><span class="metric">2</span><small> churn</small></div>
            </div>
            <div class="col-md-3">
              <div><span class="metric">1.1</span><small> complexity</small></div>
              <div><span class="metric">39</span><small> duplications</small></div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="code-tabs">
          <ul class="nav nav-pills right-to-left">
            <li><a href="#" id="toggle-code" class="toggle-button button">code</a></li>
            <li class="active">
              <a href="#" id="toggle-smells" class="toggle-button button">
                2
                smells
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <code class="prettyprint linenums lang-ruby file-code js-file-code">require &#39;fileutils&#39;
require &#39;nokogiri&#39;
require &#39;optparse&#39;

VERSION = &#39;1.0.0&#39;.freeze

def create_path(path)<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="https://github.com/troessner/reek/blob/master/docs/Utility-Function.md" target="_blank"><b>UtilityFunction</b></a>        </span>      </div>      <span>create_path doesn't depend on instance state (maybe move it to another class?)</span>          </div>  </li></ol>
  path.tr(&#39;\\&#39;, &#39;/&#39;)
end

# implement commandline options
options = {:path =&gt; nil}

parser = OptionParser.new do |opts|<ol class="nocode errors smells">  <li>    <div class="description">      <div class="heading">        <span>          <i class="fa fa-warning" aria-hidden"true"=""></i>          <a href="http://docs.seattlerb.org/flay/" target="_blank"><b>DuplicateCode</b></a>        </span>      </div>      <span>Similar code found in 7 nodes</span>              <span>Locations:</span>                  <a href="built_in_datatypes.html#L14" class="js-smell-location">0</a>                  <a href="doc_id.html#L23" class="js-smell-location">1</a>                  <a href="excel.html#L70" class="js-smell-location">2</a>                  <a href="generate_docs.html#L10" class="js-smell-location">3</a>                  <a href="missing_base_elements.html#L85" class="js-smell-location">4</a>                  <a href="namespace_prefixes.html#L23" class="js-smell-location">5</a>                  <a href="web_charts.html#L54" class="js-smell-location">6</a>                  </div>  </li></ol>
  opts.banner = &#39;Usage: built_in_datatypes.rb&#39;

  opts.on(&#39;-p&#39;, &#39;--path path&#39;, &#39;Path to schema&#39;) do |path|
    options[:path] = path
  end

  opts.on(&#39;-h&#39;, &#39;--help&#39;, &#39;Displays help&#39;) do
    puts opts
    exit
  end

  opts.on_tail(&#39;--version&#39;, &#39;Show program version&#39;) do
    puts VERSION
    exit
  end
end

parser.parse!

if options[:path].nil?
  print &#39;Enter path to schema: &#39;
  options[:path] = STDIN.gets.chomp
end

@error = 0
@allowed = %w[string boolean base64Binary hexBinary float decimal double anyURI QName NOTATION duration dateTime time date gYearMonth gYear gMonthDay gDay gMonth
              normalizedString integer token nonPositiveInteger long nonNegativeInteger language Name NMTOKEN negativeInteger
              int unsignedLong positiveInteger NCName NMTOKENS short unsignedInt ID IDREF ENTITY byte unsignedShort IDREFS
              ENTITIES unsignedByte]

# start
project_path = create_path(options[:path])
@datatypes = []

Dir.glob(&quot;#{project_path}/**/*.xsd&quot;).map do |schema|
  @doc = Nokogiri::XML(File.open(schema))
  @doc.xpath(&#39;//*[starts-with(@type,&quot;xsd:&quot;)]&#39;).map do |tag|
    type = tag.attribute(&#39;type&#39;).to_s.split(&#39;:&#39;).last
    next if @datatypes.include?(type)

    @datatypes &lt;&lt; type
  end
end

@datatypes.map do |type|
  next if @allowed.include?(type)

  @error = 1
  puts &quot;#{type} does not match any built in XML Schema datatype&quot;
end

exit 1 unless @error.zero?
</code>
  </div>
</div>

        </div>
      </div>
    </div>

    <!-- Javascripts -->
    <script src='../assets/javascripts/jquery.min.js'></script>
    <script src='../assets/javascripts/jquery.tablesorter.min.js'></script>
    <script src='../assets/javascripts/jquery.scrollTo.min.js'></script>
    <script src='../assets/javascripts/jquery.timeago.js'></script>
    <script src='../assets/javascripts/highcharts.src-4.0.1.js'></script>
    <script src='../assets/javascripts/prettify.js'></script>
    <script src='../assets/javascripts/bootstrap.min.js'></script>
    <script src='../assets/javascripts/application.js'></script>
    <script src='../assets/javascripts/jquery.filtertable.min.js'></script>
  </body>
</html>
